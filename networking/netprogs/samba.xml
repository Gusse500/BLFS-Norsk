<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY samba-download-http "https://download.samba.org/pub/samba/stable/samba-&samba-version;.tar.gz">
  <!ENTITY samba-download-ftp  " ">
  <!ENTITY samba-md5sum        "c3f3d5eb760b27d5d340f81844405673">
  <!ENTITY samba-size          "41 MB">
  <!ENTITY samba-buildsize     "691 MB (legg til 64 MB for rask test)">
  <!ENTITY samba-time          "2.1 SBU (bruker parallellisme=4; legg til 0,4 SBU for rask test)">
]>

<sect1 id="samba" xreflabel="Samba-&samba-version;">
  <?dbhtml filename="samba.html"?>


  <title>Samba-&samba-version;</title>

  <indexterm zone="samba">
    <primary sortas="a-Samba">Samba</primary>
  </indexterm>

  <sect2 role="package">
    <title>Introduksjon til Samba</title>

    <para>
      <application>Samba</application> pakken gir fil og utskrifts
      tjenester til SMB/CIFS klienter og Windows nettverk til Linux klienter.
      <application>Samba</application> kan også konfigureres som en Windows
      Domenekontrollererstatning, en fil-/utskriftsserver som fungerer som medlem
      av et Windows Active Directory domene og et NetBIOS (RFC1001/1002)
      navneserver (som blant annet gir støtte for LAN surfing).
    </para>

    &lfs123_checked;

    <bridgehead renderas="sect3">Pakkeinformasjon</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Nedlasting (HTTP): <ulink url="&samba-download-http;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Nedlasting (FTP): <ulink url="&samba-download-ftp;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Nedlasting MD5 sum: &samba-md5sum;
        </para>
      </listitem>
      <listitem>
        <para>
          Nedlastingsstørrelse: &samba-size;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimert diskplass som kreves: &samba-buildsize;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimert byggetid: &samba-time;
        </para>
      </listitem>
    </itemizedlist>
<!--
    <bridgehead renderas="sect3">Ytterligere nedlastinger</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Valgfri oppdatering (Nødvendig for å kjøre testpakken):
          <ulink url="&patch-root;/samba-&samba-version;-testsuite_linux_6_13-1.patch"/>
        </para>
      </listitem>
    </itemizedlist>
	-->
    <bridgehead renderas="sect3">Samba Avhengigheter</bridgehead>

    <bridgehead renderas="sect4">Påkrevd</bridgehead>
    <para role="required">
      <xref linkend="gnutls"/>,
      <xref linkend="libtirpc"/>,
      <xref linkend="perl-parse-yapp"/>, og
      <xref linkend="rpcsvc-proto"/>
    </para>

    <bridgehead renderas="sect4">Anbefalt</bridgehead>
    <para role="recommended">
      <phrase revision="sysv"><xref linkend="dbus"/> (for vfs_snapper, som er
      nyttig på systemer som støtter Volume Shadow Copies på Windows),</phrase>
      <xref linkend="fuse3"/>,
      <xref linkend="gpgme"/>,
      <xref linkend="icu"/>,
      <xref linkend="jansson"/>,
      <xref linkend="libtasn1"/>,
      <xref linkend="libxslt"/> (for dokumentasjon),
      <xref linkend="linux-pam"/>,
      <xref linkend="lmdb"/>,
      <xref linkend="mitkrb"/>, og
      <xref linkend="openldap"/>
    </para>

    <bridgehead renderas="sect4">Valgfri</bridgehead>
    <para role="optional">
      <xref linkend="avahi"/>,
      <xref linkend="bind"/>,
      <xref linkend="cups"/>,
      <xref linkend="cyrus-sasl"/>,
      <xref linkend="gdb"/>,
      <xref linkend="git"/>,
      <xref linkend="gnupg2"/> (kreves for ADS og testpakken),
      <xref linkend="libaio"/>,
      <xref linkend="libarchive"/> (for tar i smbclient),
      <xref linkend="libcap-pam"/>,
      <xref linkend="libgcrypt"/>,
      <xref linkend="libnsl"/>,
      <xref linkend="libunwind"/>,
      <xref linkend="markdown"/>,
      <xref linkend="nss"/>,
      <xref linkend="popt"/>,
      <xref linkend="talloc"/> (brukt av testpakken),
      <xref linkend="vala"/>,
      <xref linkend="valgrind"/> (valgfritt brukt av testpakken),
      <xref linkend="xfsprogs"/>,
      <ulink url="https://cmocka.org/">cmocka</ulink>,
      <ulink url="https://cryptography.io/en/latest/">cryptography</ulink>,
      <ulink url="https://ctdb.samba.org/">ctdb</ulink> (inkludert),
      <ulink url="https://cwrap.org/">cwrap</ulink>,
      <ulink url="&pypi;/dnspython/">dnspython</ulink>,
      <ulink url="https://packages.debian.org/bullseye/fam">FAM</ulink>,
      <ulink url="https://packages.debian.org/sid/gamin">Gamin</ulink>,
      <ulink url="https://www.gluster.org/">GlusterFS</ulink>,
      <ulink url="https://github.com/heimdal/">Heimdal</ulink> (inkludert),
      <ulink url="https://pypi.org/project/iso8601/">iso8601</ulink>,
      <ulink url="https://ldb.samba.org/">ldb</ulink> (inkludert),
      <ulink url="https://www.openafs.org/">OpenAFS</ulink>,
      <ulink url="https://github.com/python-poetry/poetry-core">poetry-core (påkrevd for ADS)</ulink>,
      <ulink url="https://pypi.org/project/pyasn1/">pyasn1</ulink>,
      <ulink url="https://tevent.samba.org/">tevent</ulink> (inkludert),
      <ulink url="https://tdb.samba.org/">tdb</ulink> (inkludert), og
      <ulink url="https://download.gnome.org/sources/tracker/2.3/">tracker-2</ulink>
    </para>

    <bridgehead renderas="sect4">Valgfri (for Utviklertestpakken)</bridgehead>
    <para role="optional">
      Installer i oppført rekkefølge:
      <xref linkend="six"/>,
      <xref linkend="pytest"/>,
      <ulink url="&pypi;/argparse/">argparse</ulink>,
      <ulink url="&pypi;/testtools/">testtools</ulink>,
      <ulink url="&pypi;/testscenarios/">testscenarios</ulink>, og
      <ulink url="&pypi;/python-subunit/">python-subunit</ulink>
    </para>

    <para condition="html" role="usernotes">Redaktørens notater:
    <ulink url="&blfs-wiki;/samba4"/></para>

  </sect2>

  <sect2 role="installation">
    <title>Installasjon av Samba</title>

    <para>
      For å støtte testpakken, sett opp et virtuelt Pythonmiljø
      for noen Python moduler utenfor omfanget av BLFS:
    </para>

<screen><userinput remap="pre">python3 -m venv --system-site-packages pyvenv         &amp;&amp;
./pyvenv/bin/pip3 install cryptography pyasn1 iso8601</userinput></screen>

    <para>
      Installer <application>Samba</application> ved å kjøre følgende
      kommandoer:
    </para>

<screen revision="sysv"><userinput>PYTHON=$PWD/pyvenv/bin/python3             \
PATH=$PWD/pyvenv/bin:$PATH                 \
./configure                                \
    --prefix=/usr                          \
    --sysconfdir=/etc                      \
    --localstatedir=/var                   \
    --with-piddir=/run/samba               \
    --with-pammodulesdir=/usr/lib/security \
    --enable-fhs                           \
    --without-ad-dc                        \
    --without-systemd                      \
    --with-system-mitkrb5                  \
    --enable-selftest                      \
    --disable-rpath-install                &amp;&amp;
make</userinput></screen>

<screen revision="systemd"><userinput>PYTHON=$PWD/pyvenv/bin/python3             \
./configure                                \
    --prefix=/usr                          \
    --sysconfdir=/etc                      \
    --localstatedir=/var                   \
    --with-piddir=/run/samba               \
    --with-pammodulesdir=/usr/lib/security \
    --enable-fhs                           \
    --without-ad-dc                        \
    --with-system-mitkrb5                  \
    --enable-selftest                      \
    --disable-rpath-install                &amp;&amp;
make</userinput></screen>

    <para>
      For å teste resultatene, kjør:
      <command>PATH=$PWD/pyvenv/bin:$PATH make quicktest</command>. Testpakken
      vil produsere linjer som ser ut som feil, men disse er ufarlige.
      De siste utdatalinjene skal rapportere <emphasis>"ALL OK"</emphasis>
      for en god testkjøring. En oppsummering av eventuelle feil finner du i
      <filename class="directory">./st/summary</filename>.
    </para>

    <!--
      If doing a security update or a new minor version (point releases do not
      apply here), run 'make testenv' before running 'make test' and 'make
      subunit-test'. This will set up the test environment and make the tests
      run faster, as well as point out any glaring issues that might affect
      the new Samba installation. With 4.10.4, I got 236 failures, 73 errors,
      and 2 unexpected successes. These were all known upstream, and you can
      find them in the knownfail list in their git repo. This is per
      Upstream's recommendation over IRC.
    -->

    <note>
      <para>
        I tillegg er testpakker for utviklere tilgjengelige. Hvis du har installert
        de valgfrie pythonmodulene ovenfor i det virtuelle Pythonmiljøet
        for å bygge denne pakken, kan du kjøre disse testene med
        <command>make test</command>. Det anbefales ikke for gjennomsnittsbyggeren,
        testene er rundt 290 SBU og over en gigabyte diskplass, og du
        bør forvente ~73 feil og ~30 mislykket fra 3000+ tester.
      </para>
    </note>

    <para>
      Fiks hardkodete baner til Python 3 tolken:
    </para>

<screen><userinput>sed '1s@^.*$@#!/usr/bin/python3@' \
    -i ./bin/default/source4/scripting/bin/*.inst</userinput></screen>

    <para>
      Hvis du oppgraderer fra en gammel versjon av samba, som
      <systemitem class="username">root</systemitem> bruker, fjerne de gamle
      Python støttefilene for å forhindre noen problemer:
    </para>

<screen role="root"><userinput>rm -rf /usr/lib/python&python3-majorver;/site-packages/samba</userinput></screen>

    <para>
      Fortsatt som <systemitem class="username">root</systemitem> bruker,
      installer pakken:
    </para>

<screen role="root"><userinput>make install &amp;&amp;

install -v -m644 examples/smb.conf.default /etc/samba &amp;&amp;

sed -e "s;log file =.*;log file = /var/log/samba/%m.log;"   \
    -e "s;path = /usr/spool/samba;path = /var/spool/samba;" \
    -i /etc/samba/smb.conf.default &amp;&amp;

mkdir -pv /etc/openldap/schema &amp;&amp;

install -v -m644    examples/LDAP/README \
                    /etc/openldap/schema/README.samba &amp;&amp;

install -v -m644    examples/LDAP/samba* \
                    /etc/openldap/schema &amp;&amp;

install -v -m755    examples/LDAP/{get*,ol*} \
                    /etc/openldap/schema</userinput></screen>

  </sect2>

  <sect2 role="commands">
    <title>Parameterforklaringer</title>

    <para>
      <parameter>--enable-fhs</parameter>: Tildeler alle andre filbaner på
      en måte som er i samsvar med Filesystem Hierarchy Standard (FHS).
    </para>

    <para revision="sysv">
      <parameter>--without-systemd</parameter>: Deaktiver
      <application>systemd</application> integrasjon, siden den ikke er bygget
      i System V versjonen av LFS/BLFS.
    </para>

    <para revision="sysv">
      <option>--with-shared-modules='!vfs_snapper'</option>: Deaktiver
      vfs_snapper modulen hvis du vil bygge samba uten <application>dbus</application> støtte, for oppsett uten grafisk brukergrensesnitt.
    </para>

    <para>
      <parameter>--without-ad-dc</parameter>: Deaktiver
      Active Directory Domain Controller funksjonalitet. Se <ulink url=
      "https://wiki.samba.org/index.php/Setup_a_Samba_Active_Directory_Domain_Controller">
      Set up a Samba Active Directory Domain Controller</ulink> for detaljert
      informasjon. Fjern denne bryteren hvis du har installert Pythonmodulene
      nødvendig for ADS støtte. Merk at BLFS ikke gir et samba oppstartsskript
      eller systemd enhet for en Active Directory domenekontroller.
    </para>

    <para>
      <parameter>--with-system-mitkrb5</parameter>: Aktiverer
      bygging med systemversjonen av Kerberos. Dette
      reduserer sikkerhetssårbarheter og reduserer byggetiden.
      Fjern denne hvis du ikke har <xref linkend="mitkrb"/> installert.
    </para>

    <!-- Note that /usr/lib/samba is still in rpath and it's really
         needed. -->
    <para>
      <parameter>--disable-rpath-install</parameter>: Fjerner
      bibliotekinstallasjonsbanen fra innebygd delt biblioteksøk
      stier i de installerte binære kjørbare filene og delte bibliotekene.
      Når denne pakken er installert på standardplasseringen, blir biblioteket
      installasjonsveien er <filename class='directory'>/usr/lib</filename>.
      Det søkes alltid etter den dynamiske linkeren, så det er ikke nødvendig
      bygge den inn i installerte filer.
    </para>

    <para>
      <option>--with-selftest-prefix=SELFTEST_PREFIX</option>: Dette alternativet
      spesifiserer testpakkens arbeidsmappe (default=./st).
    </para>

    <para>
      <command>install -v -m644 examples/LDAP/* /etc/openldap/schema</command>:
      Disse kommandoene brukes til å kopiere eksempler på Samba skjemaer til OpenLDAP
      <filename class='directory'>schema</filename> mappen.
    </para>

    <para>
      <command>install -v -m644 ../examples/smb.conf.default
      /etc/samba</command>: Dette kopierer en standard <filename>smb.conf</filename>
      fil i <filename>/etc/samba</filename>. Denne eksempelkonfigurasjonen vil
      ikke fungerer før du kopierer det til <filename>/etc/samba/smb.conf</filename> og
      gjør de nødvendige endringene for installasjonen. Se konfigurasjon
      seksjonen for minimumsverdier som må settes.
    </para>

  </sect2>

  <sect2 role="configuration">
    <title>Konfigurere Samba</title>

    <sect3 id="samba-config">
      <title>Konfigurasjonsfiler</title>

      <para>
        /etc/samba/smb.conf
      </para>

      <indexterm zone="samba samba-config">
        <primary sortas="e-etc-samba-smb.conf">/etc/samba/smb.conf</primary>
      </indexterm>

    </sect3>

    <sect3>
      <title>Skrive ut til SMB klienter</title>

      <para>
        Hvis du bruker <application>CUPS</application> for utskriftstjenester, og du
        ønsker å skrive ut til en skriver koblet til en SMB klient, må du
        opprette en SMB bakstykkeenhet. For å opprette enheten, utfør følgende
        kommando som <systemitem class="username">root</systemitem> bruker:
      </para>

<screen role="root"><userinput>install -dvm 755 /usr/lib/cups/backend &amp;&amp;
ln -v -sf /usr/bin/smbspool /usr/lib/cups/backend/smb</userinput></screen>

    </sect3>

    <sect3>
      <title>Konfigurasjonsinformasjon</title>

      <para>
        På grunn av kompleksiteten og de mange ulike bruksområdene for
        <application>Samba</application>, komplett konfigurasjon for alle
        pakkens kapasiteter er langt utenfor omfanget av BLFS boken. Denne
        delen gir instruksjoner for å konfigurere
        <filename>/etc/samba/smb.conf</filename> filen for to vanlige scenarier.
        Det komplette innholdet i <filename>/etc/samba/smb.conf</filename> vil
        avhenge av formålet med <application>Samba</application>
        installasjonen.
      </para>

      <note>
        <para>
          Du kan finne det lettere å kopiere de viste konfigurasjonsparametrene
          under inn i en tom <filename>/etc/samba/smb.conf</filename> fil
          i stedet for å kopiere og redigere standardfilen som nevnt i
          <quote>Parameterforklaringer</quote> seksjonen. Hvordan du oppretter/redigerer
          <filename>/etc/samba/smb.conf</filename> filen vil bli overlatt til
          deg. Sørg for at filen bare er skrivbar av
          <systemitem class="username">root</systemitem> bruker (mode 644).
        </para>
      </note>

      <sect4>
        <title>Scenario 1: Minimal frittstående installasjon av kun klient</title>

        <para>
          Velg denne varianten hvis du kun vil overføre filer ved hjelp av
          <command>smbclient</command>, montere Windows delinger og skrive ut til
          Windows skrivere, og ønsker ikke å dele filene og skriverne dine med
          Windows maskiner.
        </para>

        <para>
          En <filename>/etc/samba/smb.conf</filename> fil med følgende
          tre parametere er tilstrekkelig:
        </para>

<screen role='root'><literal>[global]
    workgroup = <replaceable>WORKGROUP</replaceable>
    dos charset = <replaceable>cp850</replaceable>
    unix charset = <replaceable>ISO-8859-1</replaceable></literal></screen>

        <para>
          Verdiene i dette eksemplet spesifiserer at datamaskinen tilhører en
          Windows arbeidsgruppe navngitt
          <literal><replaceable>WORKGROUP</replaceable></literal>, bruker
          <literal><replaceable>cp850</replaceable></literal> tegnsett
          når du snakker med MS-DOS og MS Windows 9x, og at filnavnene
          er lagret i <literal><replaceable>ISO-8859-1</replaceable></literal>
          koding på disken. Juster disse verdiene riktig for din
          installasjon. <literal>unix charset</literal> verdien må være den samme
          som utdataen av <command>locale charmap</command> når den utføres med
          <envar>LANG</envar> variabel satt til din foretrukne lokalitet,
          ellers vil <command>ls</command> kommandoen kanskje ikke vise
          filnavn på nedlastede filer riktig.
        </para>

        <para>
          Det er ikke nødvendig å kjøre noen <application>Samba</application>
          servere i dette scenariet, så du trenger ikke å installere det medfølgende
          <phrase revision="sysv">oppstartsskriptet.</phrase>
          <phrase revision="systemd">systemd enheten.</phrase>
        </para>

      </sect4>

      <sect4>
        <title>Scenario 2: Frittstående fil-/utskriftsserver</title>

        <para>
          Velg denne varianten hvis du vil dele filene og skriverne dine
          til Windows maskiner i arbeidsgruppen din i tillegg til mulighetene
          beskrevet i scenario 1.
        </para>

        <para>
          I dette tilfellet <filename>/etc/samba/smb.conf.default</filename>
          filen kan være en god mal å starte fra. Du bør også legge til
          <quote>dos charset</quote> og <quote>unix charset</quote> parametere
          til <quote>[global]</quote> seksjonen som beskrevet i Scenario 1
          for å forhindre korrupsjon av filnavn. Av sikkerhetsmessige årsaker kan du
          definere
          <replaceable>path = /home/alice/shared-files</replaceable>,
          forutsatt at brukernavnet ditt er <replaceable>alice</replaceable> og du
          vil bare dele filene i den mappen, i stedet for hele
          home mappen. Bytt deretter ut <replaceable>homes</replaceable> med
          <replaceable>shared-files</replaceable> og endre også
          <quote><literal>comment</literal></quote> hvis du bruker konfigurasjonsfilen
          nedenfor eller <filename>/etc/samba/smb.conf.default</filename>
          for å lage din.
        </para>

        <para>
          Følgende konfigurasjonsfil oppretter en separat delingsfil for hver
          brukers hjemmemappe og gjør også alle skrivere tilgjengelige for Windows
          maskiner:
        </para>

<screen role='root'><literal>[global]
    workgroup = <replaceable>WORKGROUP</replaceable>
    dos charset = <replaceable>cp850</replaceable>
    unix charset = <replaceable>ISO-8859-1</replaceable>

[homes]
    comment = Home Directories
    browseable = no
    writable = yes

[printers]
    comment = All Printers
    path = /var/spool/samba
    browseable = no
    guest ok = no
    printable = yes</literal></screen>

        <para>
          Andre parametere du kanskje ønsker å tilpasse i
          <quote>[global]</quote> delen inkluderer:
        </para>

<screen role='root'><literal>    server string =
    security =
    hosts allow =
    load printers =
    log file =
    max log size =
    socket options =
    local master =</literal></screen>

        <para>
          Referer til kommentarene i
          <filename>/etc/samba/smb.conf.default</filename> filen for informasjon
          angående disse parameterne.
        </para>

        <para>
          Siden <command>smbd</command> og <command>nmbd</command> nissene
          er nødvendig i dette tilfellet, installer <filename>samba</filename>
          <phrase revision="sysv">oppstartsskript.</phrase>
          <phrase revision="systemd">systemd enheten.</phrase>
          Sørg for å kjøre <command>smbpasswd</command> (med
          <option>-a</option> alternativet for å legge til brukere) for å aktivere og angi passord
          for alle kontoer som trenger <application>Samba</application> tilgang.
          Bruke standard <application>Samba</application> passdb backend,
          alle brukere du prøver å legge til, må også eksistere i
          <filename>/etc/passwd</filename> filen.
        </para>

      </sect4>

      <sect4>
        <title>Avanserte krav</title>

        <para>
          Mer komplekse scenarier som involverer domenekontroll eller medlemskap er
          mulig. Slike oppsett er avanserte emner og kan ikke bli tilstrekkelig
          dekket i BLFS. Det er skrevet mange komplette bøker om disse temaene.
          Vær oppmerksom på at i noen scenarier for domenemedlemskap,
          <command>winbindd</command> nissen og tilsvarende
          <phrase revision="sysv">oppstartsskript</phrase>
          <phrase revision="systemd">systemd enhet</phrase> trengs.
        </para>

      </sect4>

      <sect4>
        <title>Gjestekonto</title>

        <para>
          Standard <application>Samba</application> installasjonen bruker
          <systemitem class='username'>nobody</systemitem> brukeren for gjesttilgang
          til serveren. Dette kan overstyres ved å stille inn
          <option>guest account =</option> parameteren i
          <filename>/etc/samba/smb.conf</filename> filen. Hvis du bruker
          <option>guest account =</option> parameter, sørg for at denne brukeren eksisterer
          i <filename>/etc/passwd</filename> filen.
        </para>

      </sect4>

      <sect4 id="samba-init" revision="sysv">
        <title>Oppstartsskript</title>

        <para>
          For enkelhets skyld er det gitt 
          <application>Samba</application> oppstartsskript. Det er to inkludert i
          <xref linkend="bootscripts"/> pakken. Den første,
          <filename>samba</filename>, vil starte <command>smbd</command>
          og <command>nmbd</command> nissen nødvendig for å gi SMB/CIFS
          tjenester. Det andre skriptet, <filename>winbind</filename>, starter
          <command>winbindd</command> nissen, brukes til å tilby Windows
          domenetjenester til Linux klienter.
        </para>

        <indexterm zone="samba samba-init">
          <primary sortas="f-samba">samba</primary>
        </indexterm>

        <indexterm zone="samba samba-init">
          <primary sortas="f-winbind">winbind</primary>
        </indexterm>

<screen role="root"><userinput>make install-samba</userinput></screen>

<screen role="root"><userinput>make install-winbindd</userinput></screen>

      </sect4>

      <sect4 id="samba-init-sysd" revision="systemd">
        <title>Systemd Enheter</title>

        <para>
          For å starte <application>Samba</application> nissene ved oppstart,
          installer systemd enhetene fra <xref linkend="systemd-units"/>
          pakken ved å kjøre følgende kommando som
          <systemitem class="username">root</systemitem> bruker:
        </para>

        <indexterm zone="samba samba-init-sysd">
          <primary sortas="f-samba">samba</primary>
        </indexterm>

<screen role="root"><userinput>make install-samba</userinput></screen>

        <para>
          For å starte <command>winbindd</command> nissen ved oppstart,
          installer systemd enheten fra <xref linkend="systemd-units"/>
          pakken ved å kjøre følgende kommando som
          <systemitem class="username">root</systemitem> bruker:
        </para>

        <indexterm zone="samba samba-init-sysd">
          <primary sortas="f-winbindd">winbindd</primary>
        </indexterm>

<screen role="root"><userinput>make install-winbindd</userinput></screen>

        <note>
          <para>
            Denne pakken kommer med to typer enheter: En tjenestefil og en
            socket fil. Tjenestefilen vil starte smbd nissen en gang ved
            oppstart og den vil fortsette å kjøre til systemet slår seg av.
            Socket filen vil få systemd til å lytte på smbd porten (standard 445,
            må redigeres for noe annet) og vil starte smbd
            nissen når noe prøver å koble til den porten og stoppe
            nissen når forbindelsen er avsluttet. Dette kalles socket
            aktivering og er analog med å bruke
            <application>{,x}inetd</application> på et SysVinit basert system.
          </para>

          <para>
            Som standard brukes den første metoden - smbd nissen startes
            ved oppstart og stoppet ved avstengning. Hvis socket metoden er ønsket,
            må du kjøre følgende kommandoer som <systemitem
            class="username">root</systemitem> bruker:
          </para>

<screen role="root"><userinput>systemctl stop smbd &amp;&amp;
systemctl disable smbd &amp;&amp;
systemctl enable smbd.socket &amp;&amp;
systemctl start smbd.socket</userinput></screen>

          <para>
            Merk at bare smbd nissen kan socket aktiveres.
          </para>
        </note>
      </sect4>

    </sect3>

  </sect2>

  <sect2 role="content">
    <title>Innhold</title>

    <segmentedlist>
      <segtitle>Installerte Programmer</segtitle>
      <segtitle>Installerte Biblioteker</segtitle>
      <segtitle>Installerte Mapper</segtitle>

      <seglistitem>

        <seg>
          cifsdd, dbwrap_tool, dumpmscat, eventlogadm, gentest,
          ldbadd, ldbdel, ldbedit, ldbmodify, ldbrename, ldbsearch, locktest,
          masktest, mdsearch, mvxattr, ndrdump, net, nmbd, nmblookup, ntlm_auth,
          oLschema2ldif, pdbedit, profiles, regdiff, regpatch, regshell,
          regtree, rpcclient, samba-log-parser, samba-gpupdate, samba-regedit,
          samba-tool, sharesec, smbcacls, smbclient, smbcontrol, smbcquotas,
          smbd, smbget, smbpasswd, smbspool, smbstatus, smbtar, smbtorture,
          smbtree, tdbbackup, tdbdump, tdbrestore, tdbtool, testparm, wbinfo,
          og winbindd
        </seg>

        <seg>
          libdcerpc-binding.so, libdcerpc-samr.so,
          libdcerpc-server-core.so, libdcerpc.so,
          libndr-krb5pac.so, libndr-nbt.so, libndr.so,
          libndr-standard.so, libnetapi.so, libnss_winbind.so, libnss_wins.so,
          libsamba-credentials.so, libsamba-errors.so,
          libsamba-hostconfig.so, libsamba-passdb.so,
          libsamba-policy.cpython-311-x86_64-linux-gnu.so, libsamba-util.so,
          libsamdb.so, libsmbclient.so,
          libsmbconf.so, libsmbldap.so, libtevent-util.so,
          libwbclient.so, og filsystemer og støttemoduler under
          /usr/lib/{python&python3-majorver;,samba}
        </seg>

        <seg>
          /etc/samba, /run/samba, /usr/include/samba-4.0,
          /usr/lib/python&python3-majorver;/site-packages/samba,
          /usr/{lib,libexec,share}/samba,
          og /var/{cache,lib,lock,log,run}/samba
        </seg>

      </seglistitem>
    </segmentedlist>

    <variablelist>
      <bridgehead renderas="sect3">Korte Beskrivelser</bridgehead>
      <?dbfo list-presentation="list"?>
      <?dbhtml list-presentation="table"?>

      <varlistentry id="cifsdd">
        <term><command>cifsdd</command></term>
        <listitem>
          <para>
            er dd kommandoen for SMB
          </para>
          <indexterm zone="samba cifsdd">
            <primary sortas="b-cifsdd">cifsdd</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="dbwrap_tool">
        <term><command>dbwrap_tool</command></term>
        <listitem>
          <para>
            brukes til å lese og manipulere TDB/CTDB databaser ved hjelp av
            dbwrap grensesnittet
          </para>
          <indexterm zone="samba dbwrap_tool">
            <primary sortas="b-dbwrap_tool">dbwrap_tool</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="dumpmscat">
        <term><command>dumpmscat</command></term>
        <listitem>
          <para>
            dumper innholdet i MS katalogfiler
          </para>
          <indexterm zone="samba dumpmscat">
            <primary sortas="b-dumpmscat">dumpmscat</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="eventlogadm">
        <term><command>eventlogadm</command></term>
        <listitem>
          <para>
            brukes til å skrive poster til hendelseslogger fra STDIN, legg til
            spesifiserte kilde og DLL hendelsesloggregisteroppføringer og vis
            aktive hendelsesloggnavn (fra <filename>smb.conf</filename>)
          </para>
          <indexterm zone="samba eventlogadm">
            <primary sortas="b-eventlogadm">eventlogadm</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="gentest">
        <term><command>gentest</command></term>
        <listitem>
          <para>
            brukes til å kjøre tilfeldige generiske SMB operasjoner mot to
            SMB servere og viser forskjellene i oppførsel
          </para>
          <indexterm zone="samba gentest">
            <primary sortas="b-gentest">gentest</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="ldbadd">
        <term><command>ldbadd</command></term>
        <listitem>
          <para>
            er et kommandolinjeverktøy for å legge til poster til en LDB
            database
          </para>
          <indexterm zone="samba ldbadd">
            <primary sortas="b-ldbadd">ldbadd</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="ldbdel">
        <term><command>ldbdel</command></term>
        <listitem>
          <para>
            er et kommandolinjeverktøy for å slette LDB databaseposter
          </para>
          <indexterm zone="samba ldbdel">
            <primary sortas="b-ldbdel">ldbdel</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="ldbedit">
        <term><command>ldbedit</command></term>
        <listitem>
          <para>
            lar deg redigere LDB databaser ved å bruke ditt foretrukne skriveprogram
          </para>
          <indexterm zone="samba ldbedit">
            <primary sortas="b-ldbedit">ldbedit</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="ldbmodify">
        <term><command>ldbmodify</command></term>
        <listitem>
          <para>
            lar deg endre poster i en LDB database
          </para>
          <indexterm zone="samba ldbmodify">
            <primary sortas="b-ldbmodify">ldbmodify</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="ldbrename">
        <term><command>ldbrename</command></term>
        <listitem>
          <para>
            lar deg gi nytt navn til LDB databaser
          </para>
          <indexterm zone="samba ldbrename">
            <primary sortas="b-ldbrename">ldbrename</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="ldbsearch">
        <term><command>ldbsearch</command></term>
        <listitem>
          <para>
            søker i en LDB database for poster som samsvarer med en spesifisert
             uttrykk
          </para>
          <indexterm zone="samba ldbsearch">
            <primary sortas="b-ldbsearch">ldbsearch</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="locktest">
        <term><command>locktest</command></term>
        <listitem>
          <para>
            brukes til å finne forskjeller i låsing mellom to SMB servere
          </para>
          <indexterm zone="samba locktest">
            <primary sortas="b-locktest">locktest</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="masktest">
        <term><command>masktest</command></term>
        <listitem>
          <para>
            brukes til å finne forskjeller i jokertegn matching mellom
            Sambas implementering og den av en ekstern server
          </para>
          <indexterm zone="samba masktest">
            <primary sortas="b-masktest">masktest</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="mdsearch">
        <term><command>mdsearch</command></term>
        <listitem>
          <para>
            kjører <application>Spotlight</application> søkinger mot en SMB
            server
          </para>
          <indexterm zone="samba mdsearch">
            <primary sortas="b-mdsearch">mdsearch</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="mvxattr">
        <term><command>mvxattr</command></term>
        <listitem>
          <para>
            brukes til rekursivt å endre navn på utvidede attributter
          </para>
          <indexterm zone="samba mvxattr">
            <primary sortas="b-mvxattr">mvxattr</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="ndrdump">
        <term><command>ndrdump</command></term>
        <listitem>
          <para>
            er en DCE/RPC pakkefortolker og dumper
          </para>
          <indexterm zone="samba ndrdump">
            <primary sortas="b-ndrdump">ndrdump</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="net">
        <term><command>net</command></term>
        <listitem>
          <para>
            er et verktøy for administrasjon av <application>Samba</application>
            og eksterne CIFS servere, som ligner på <command>net</command>
            verktøyet for DOS/Windows
          </para>
          <indexterm zone="samba net">
            <primary sortas="b-net">net</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="nmbd">
        <term><command>nmbd</command></term>
        <listitem>
          <para>
            er <application>Samba</application> NetBIOS navneserver
          </para>
          <indexterm zone="samba nmbd">
            <primary sortas="b-nmbd">nmbd</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="nmblookup">
        <term><command>nmblookup</command></term>
        <listitem>
          <para>
            brukes til å spørre etter NetBIOS navn og tilordne dem til IP adresser
          </para>
          <indexterm zone="samba nmblookup">
            <primary sortas="b-nmblookup">nmblookup</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="ntlm_auth">
        <term><command>ntlm_auth</command></term>
        <listitem>
          <para>
            er et verktøy for å tillate ekstern tilgang til Winbind sin
            NTLM autentiseringsfunksjon
          </para>
          <indexterm zone="samba ntlm_auth">
            <primary sortas="b-ntlm_auth">ntlm_auth</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="oLschema2ldif">
        <term><command>oLschema2ldif</command></term>
        <listitem>
          <para>
            konverterer LDAP skjemaer til LDB-kompatible LDIF
          </para>
          <indexterm zone="samba oLschema2ldif">
            <primary sortas="b-oLschema2ldif">oLschema2ldif</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="pdbedit">
        <term><command>pdbedit</command></term>
        <listitem>
          <para>
            er et verktøy som brukes til å administrere SAM databasen
          </para>
          <indexterm zone="samba pdbedit">
            <primary sortas="b-pdbedit">pdbedit</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="profiles">
        <term><command>profiles</command></term>
        <listitem>
          <para>
            er et verktøy som rapporterer og endrer SIDer i Windows
            registerfiler
          </para>
          <indexterm zone="samba profiles">
            <primary sortas="b-profiles">profiles</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="regdiff">
        <term><command>regdiff</command></term>
        <listitem>
          <para>
            er et Diff program for Windows registerfiler
          </para>
          <indexterm zone="samba regdiff">
            <primary sortas="b-regdiff">regdiff</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="regpatch">
        <term><command>regpatch</command></term>
        <listitem>
          <para>
            bruker registeroppdateringer på registerfiler
          </para>
          <indexterm zone="samba regpatch">
            <primary sortas="b-regpatch">regpatch</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="regshell">
        <term><command>regshell</command></term>
        <listitem>
          <para>
            er en Windows registerfilleser som bruker readline
          </para>
          <indexterm zone="samba regshell">
            <primary sortas="b-regshell">regshell</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="regtree">
        <term><command>regtree</command></term>
        <listitem>
          <para>
            er en registervisning i tekstmodus
          </para>
          <indexterm zone="samba regtree">
            <primary sortas="b-regtree">regtree</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="rpcclient">
        <term><command>rpcclient</command></term>
        <listitem>
          <para>
            brukes til å utføre MS-RPC klientsidefunksjoner
          </para>
          <indexterm zone="samba rpcclient">
            <primary sortas="b-rpcclient">rpcclient</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="samba-log-parser">
        <term><command>samba-log-parser</command></term>
        <listitem>
          <para>
            analyserer winbind logger generert av Samba
          </para>
          <indexterm zone="samba samba-log-parser">
            <primary sortas="b-samba-log-parser">samba-log-parser</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="samba-gpupdate">
        <term><command>samba-gpupdate</command></term>
        <listitem>
          <para>
            lar deg redigere Microsoft Group Policy Objects (GPOs)
          </para>
          <indexterm zone="samba samba-gpupdate">
            <primary sortas="b-samba-gpupdate">samba-gpupdate</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="samba-regedit">
        <term><command>samba-regedit</command></term>
        <listitem>
          <para>
            er et ncurses basert verktøy for å administrere Samba registeret
          </para>
          <indexterm zone="samba samba-regedit">
            <primary sortas="b-samba-regedit">samba-regedit</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="samba-tool">
        <term><command>samba-tool</command></term>
        <listitem>
          <para>
            er hoved administrasjonsverktøyet for Samba
          </para>
          <indexterm zone="samba samba-tool">
            <primary sortas="b-samba-tool">samba-tool</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="sharesec">
        <term><command>sharesec</command></term>
        <listitem>
          <para>
            manipulerer dele ACL tillatelser på SMB fildelinger
          </para>
          <indexterm zone="samba sharesec">
            <primary sortas="b-sharesec">sharesec</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="smbcacls">
        <term><command>smbcacls</command></term>
        <listitem>
          <para>
            brukes til å manipulere Windows NT tilgangskontrolllister
          </para>
          <indexterm zone="samba smbcacls">
            <primary sortas="b-smbcacls">smbcacls</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="smbclient">
        <term><command>smbclient</command></term>
        <listitem>
          <para>
            er et SMB/CIFS tilgangsverktøy som ligner på FTP
          </para>
          <indexterm zone="samba smbclient">
            <primary sortas="b-smbclient">smbclient</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="smbcontrol">
        <term><command>smbcontrol</command></term>
        <listitem>
          <para>
            brukes til å kontrollere kjørende <command>smbd</command>,
            <command>nmbd</command> og <command>winbindd</command> nisser
          </para>
          <indexterm zone="samba smbcontrol">
            <primary sortas="b-smbcontrol">smbcontrol</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="smbcquotas">
        <term><command>smbcquotas</command></term>
        <listitem>
          <para>
            brukes til å manipulere Windows NT kvoter på SMB fildelinger
          </para>
          <indexterm zone="samba smbcquotas">
            <primary sortas="b-smbcquotas">smbcquotas</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="smbd">
        <term><command>smbd</command></term>
        <listitem>
          <para>
            er hoved <application>Samba</application> nissen som
            leverer SMB/CIFS tjenester til klienter
          </para>
          <indexterm zone="samba smbd">
            <primary sortas="b-smbd">smbd</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="smbget">
        <term><command>smbget</command></term>
        <listitem>
          <para>
            er et enkelt verktøy med <command>wget</command>-likt semantikk,
            som kan laste ned filer fra SMB servere. Du kan spesifisere
            filer du vil laste ned på kommandolinjen
          </para>
          <indexterm zone="samba smbget">
            <primary sortas="b-smbget">smbget</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="smbpasswd">
        <term><command>smbpasswd</command></term>
        <listitem>
          <para>
            endrer en brukers <application>Samba</application> passord
          </para>
          <indexterm zone="samba smbpasswd">
            <primary sortas="b-smbpasswd">smbpasswd</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="smbspool">
        <term><command>smbspool</command></term>
        <listitem>
          <para>
            sender en utskriftsjobb til en SMB skriver
          </para>
          <indexterm zone="samba smbspool">
            <primary sortas="b-smbspool">smbspool</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="smbstatus">
        <term><command>smbstatus</command></term>
        <listitem>
          <para>
            rapporterer aktuelle <application>Samba</application> forbindelser
          </para>
          <indexterm zone="samba smbstatus">
            <primary sortas="b-smbstatus">smbstatus</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="smbtar">
        <term><command>smbtar</command></term>
        <listitem>
          <para>
            er et skallskript som brukes til å sikkerhetskopiere SMB/CIFS delinger
            direkte til Linux båndstasjoner eller til en fil
          </para>
          <indexterm zone="samba smbtar">
            <primary sortas="b-smbtar">smbtar</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="smbtorture">
        <term><command>smbtorture</command></term>
        <listitem>
          <para>
            er en testpakke som kjører flere tester mot en SMB server
          </para>
          <indexterm zone="samba smbtorture">
            <primary sortas="b-smbtorture">smbtorture</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="smbtree">
        <term><command>smbtree</command></term>
        <listitem>
          <para>
            er en tekstbasert SMB nettleser
          </para>
          <indexterm zone="samba smbtree">
            <primary sortas="b-smbtree">smbtree</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="tdbbackup">
        <term><command>tdbbackup</command></term>
        <listitem>
          <para>
            er et verktøy for å sikkerhetskopiere eller validere integriteten til
            <application>Samba</application> <filename>.tdb</filename> filer
          </para>
          <indexterm zone="samba tdbbackup">
            <primary sortas="b-tdbbackup">tdbbackup</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="tdbdump">
        <term><command>tdbdump</command></term>
        <listitem>
          <para>
            er et verktøy som brukes til å skrive ut innholdet i en
            <application>Samba</application> <filename>.tdb</filename> fil
          </para>
          <indexterm zone="samba tdbdump">
            <primary sortas="b-tdbdump">tdbdump</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="tdbrestore">
        <term><command>tdbrestore</command></term>
        <listitem>
          <para>
            er et verktøy for å opprette en <application>Samba</application>
            <filename>.tdb</filename> fil fra en tdbdump
          </para>
          <indexterm zone="samba tdbrestore">
            <primary sortas="b-tdbrestore">tdbrestore</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="tdbtool">
        <term><command>tdbtool</command></term>
        <listitem>
          <para>
            er et verktøy som tillater enkel databasemanipulering fra
            kommandolinjen
          </para>
          <indexterm zone="samba tdbtool">
            <primary sortas="b-tdbtool">tdbtool</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="testparm">
        <term><command>testparm</command></term>
        <listitem>
          <para>
            sjekker <filename>smb.conf</filename> filen for riktig syntaks
          </para>
          <indexterm zone="samba testparm">
            <primary sortas="b-testparm">testparm</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="wbinfo">
        <term><command>wbinfo</command></term>
        <listitem>
          <para>
            spør en kjørende <command>winbindd</command> nisse
          </para>
          <indexterm zone="samba wbinfo">
            <primary sortas="b-wbinfo">wbinfo</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="winbindd">
        <term><command>winbindd</command></term>
        <listitem>
          <para>
            løser navn fra Windows NT servere
          </para>
          <indexterm zone="samba winbindd">
            <primary sortas="b-winbindd">winbindd</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libnss_winbind">
        <term><filename class="libraryfile">libnss_winbind.so</filename></term>
        <listitem>
          <para>
            gir Name Service Switch API funksjoner for å løse navn
            fra NT servere
          </para>
          <indexterm zone="samba libnss_winbind">
            <primary sortas="c-libnss_winbind">libnss_winbind.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libnss_wins">
        <term><filename class="libraryfile">libnss_wins.so</filename></term>
        <listitem>
          <para>
            gir API funksjoner for Sambas implementering av
            Windows Internett navnetjeneste
          </para>
          <indexterm zone="samba libnss_wins">
            <primary sortas="c-libnss_wins">libnss_wins.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libnetapi">
        <term><filename class="libraryfile">libnetapi.so</filename></term>
        <listitem>
          <para>
            gir API funksjoner for administrasjonsverktøyene som brukes
            for Samba og eksterne CIFS servere
          </para>
          <indexterm zone="samba libnetapi">
            <primary sortas="c-libnetapi">libnetapi.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>

      <varlistentry id="libsmbclient">
        <term><filename class="libraryfile">libsmbclient.so</filename></term>
        <listitem>
          <para>
            gir API funksjoner for Samba SMB klientverktøyene
          </para>
          <indexterm zone="samba libsmbclient">
            <primary sortas="c-libsmbclient">libsmbclient.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>
<!--
      <varlistentry id="libsmbsharemodes">
        <term><filename class="libraryfile">libsmbsharemodes.so</filename></term>
        <listitem>
          <para>
            gir API funksjoner for tilgang til SMB delingsmoduser (låser osv.)
          </para>
          <indexterm zone="samba libsmbsharemodes">
            <primary sortas="c-libsmbsharemodes">libsmbsharemodes.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>-->

      <varlistentry id="libwbclient">
        <term><filename class="libraryfile">libwbclient.so</filename></term>
        <listitem>
          <para>
            tilbyr API funksjoner for Windows domeneklienttjenester
          </para>
          <indexterm zone="samba libwbclient">
            <primary sortas="c-libwbclient">libwbclient.so</primary>
          </indexterm>
        </listitem>
      </varlistentry>

    </variablelist>

  </sect2>

</sect1>
